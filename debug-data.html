<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Debug</title>
</head>
<body>
    <h1>Data Service Debug</h1>
    <button onclick="clearAndInit()">Clear & Initialize Data</button>
    <button onclick="checkData()">Check Data</button>
    <div id="output"></div>

    <script src="js/data-service.js"></script>
    <script>
        function clearAndInit() {
            console.log('Clearing all data...');
            DataService.utils.clearAllData();
            
            console.log('Initializing all data...');
            DataService.utils.initializeAllData();
            
            document.getElementById('output').innerHTML = '<p>Data cleared and initialized!</p>';
        }

        function checkData() {
            const output = document.getElementById('output');
            let html = '<h2>Data Check Results:</h2>';
            
            try {
                const customers = DataService.customers.getAll();
                const inventory = DataService.inventory.getAll();
                const leads = DataService.leads.getAll();
                const deals = DataService.deals.getAll();
                const tasks = DataService.tasks.getAll();
                
                html += `<p><strong>Customers:</strong> ${customers.length} records</p>`;
                html += `<p><strong>Inventory:</strong> ${inventory.length} records</p>`;
                html += `<p><strong>Leads:</strong> ${leads.length} records</p>`;
                html += `<p><strong>Deals:</strong> ${deals.length} records</p>`;
                html += `<p><strong>Tasks:</strong> ${tasks.length} records</p>`;
                
                if (customers.length > 0) {
                    html += `<p><strong>Sample Customer:</strong> ${customers[0].firstName} ${customers[0].lastName}</p>`;
                }
                
                if (inventory.length > 0) {
                    html += `<p><strong>Sample Vehicle:</strong> ${inventory[0].year} ${inventory[0].make} ${inventory[0].model}</p>`;
                }
                
            } catch (error) {
                html += `<p style="color: red;"><strong>Error:</strong> ${error.message}</p>`;
                console.error('Error checking data:', error);
            }
            
            output.innerHTML = html;
        }

        // Auto-initialize on page load
        window.addEventListener('DOMContentLoaded', function() {
            console.log('Debug page loaded, checking if data exists...');
            checkData();
        });
    </script>
</body>
</html>