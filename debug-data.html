<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Data - TheOnePages</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .data-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .data-section h3 { margin-top: 0; color: #333; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 3px; overflow-x: auto; }
        .count { font-weight: bold; color: #007bff; }
    </style>
</head>
<body>
    <h1>TheOnePages Data Debug</h1>
    
    <div class="data-section">
        <h3>Current Data Counts</h3>
        <div id="counts"></div>
    </div>
    
    <div class="data-section">
        <h3>Raw localStorage Data</h3>
        <div id="raw-data"></div>
    </div>
    
    <button onclick="location.reload()">Refresh</button>
    <button onclick="window.open('reset-data.html')">Open Reset Page</button>

    <script src="js/data-service.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Show counts
            const countsDiv = document.getElementById('counts');
            const rawDataDiv = document.getElementById('raw-data');
            
            if (typeof DataService !== 'undefined') {
                const inventoryCount = DataService.inventory.getAll().length;
                const leadsCount = DataService.leads.getAll().length;
                const dealsCount = DataService.deals.getAll().length;
                const tasksCount = DataService.tasks.getAll().length;
                
                countsDiv.innerHTML = `
                    <p><span class="count">Vehicles:</span> ${inventoryCount}</p>
                    <p><span class="count">Leads:</span> ${leadsCount}</p>
                    <p><span class="count">Deals:</span> ${dealsCount}</p>
                    <p><span class="count">Tasks:</span> ${tasksCount}</p>
                `;
                
                // Show first few vehicles for debugging
                const vehicles = DataService.inventory.getAll();
                rawDataDiv.innerHTML = `
                    <h4>First 5 Vehicles:</h4>
                    <pre>${JSON.stringify(vehicles.slice(0, 5), null, 2)}</pre>
                `;
            } else {
                countsDiv.innerHTML = '<p style="color: red;">DataService not loaded!</p>';
            }
            
            // Show localStorage keys
            const keys = Object.keys(localStorage).filter(key => key.startsWith('autocrm_'));
            rawDataDiv.innerHTML += `
                <h4>localStorage Keys:</h4>
                <pre>${JSON.stringify(keys, null, 2)}</pre>
            `;
        });
    </script>
</body>
</html>